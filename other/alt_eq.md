整式 $P(x)$ は, $x+1$ で割ると余りが $4$, $x^2-x+1$ で割ると余りが $x+1$ である. $P(x)$ を $x^3+1$ で割ったときの余りを求めよ.